lines â† > â€¢FLines "input21"

# Add padding around the map
# adapted from bqncrate entries on appending/prefacing a column/row of 1s
Pad â† {âˆ¾âŸœ('#'Â¨âˆ˜âŠ)'#'Â¨âˆ˜âŠâŠ¸âˆ¾'#'âˆ¾Ë˜ğ•©âˆ¾Ë˜'#'}

# Run one step.
# 'S' means reachable in exactly this many steps
# (the problem statement uses 'O', but keeping 'S' is slightly simpler).
# Look at 3x3 windows, with a padding of '#' around the map.
# The center element of a window is reachable in exactly this many steps iff:
#   it is a '.' and there's an 'S' above/below/left/right
#   otherwise, '#' and '.' remain unchanged, and 'S' reverts to '.'
Onestep â† {{c â† 1â€¿1 âŠ‘ ğ•©
 adjS â† 0< +Â´â¥Š 'S' = âŸ¨0â€¿1,1â€¿0,1â€¿2,2â€¿1âŸ© âŠ‘ ğ•©
 {adjS âˆ§ c='.' ? 'S' ;
  c='S' ? '.' ; c}
}Ë˜Ë˜ 3â€¿3 â†• Pad ğ•©}

â€¢Show +Â´â¥Š 'S'= OnestepâŸ64 lines

