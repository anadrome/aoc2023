str â† â€¢Import "util/strings.bqn"

Chop â† (1âŠ¸+âŠâŸœâŸ¨':'âŸ©)âŠ¸â†“                   # chop off the "Card n:" prefix
lines â† ChopÂ¨ â€¢FLines "input04"

winning â† str.ToNatsÂ¨ âŠâŸœâŸ¨'|'âŸ©âŠ¸â†‘Â¨ lines
ours    â† str.ToNatsÂ¨ âŠâŸœâŸ¨'|'âŸ©âŠ¸â†“Â¨ lines
n       â† ours (â‰ âˆŠ/âŠ£)Â¨ winning          # cardinality of intersection

# Part 1
# Score per card: 0 if no winning numbers, 2â‹†(n-1) otherwise
# Total score: sum of card scores
â€¢Show +Â´ âŒŠ2â‹†(n-1)

# Part 2
# Get one extra copy of the following n cards for n wins
# Result: total number of cards
extra_mask â† (â¥ŠâŸœâŸ¨0âŸ©Â¨ (1+â†•â‰ n)) Â»Â¨ ((â‰ n)â†‘â¥ŠâŸœâŸ¨1âŸ©)Â¨ n
â€¢Show +Â´ 1+ {ğ•©+ğ•¨Ã—1+(Â¯1+âŠ‘ğ•¨âŠâŸ¨1âŸ©)âŠ‘ğ•©}Â´âŒ½ extra_mask
